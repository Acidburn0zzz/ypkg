package.yml(5) -- Solus package build format
==========================================
    
## SYNOPSIS

    The Solus package build format, with YAML syntax.

## DESCRIPTION

The primary format of package builds in Solus, `package.yml(5)` provides a modern,
declarative, and structured format in which to define metadata and steps, to
convert a build operation into a package.

`ypkg-build(1)` will use the advanced patterns system and some very specific
internal rules to automatically split the package into multiple packages,
refered to here as "subpackages".


## CONFIGURATION FORMAT

`ypkg-build(1)` uses the YAML file format. However, this is a very specialised flavour
of YAML with very specific extensions and types.

`Types`

Some of the specialised types expected by `package.yml(5)` are explained below.

* `dict(s)`

    This is a set of one or more `key`:`value` mappings. These are always in
    a list format.

* `multimap`

    This is a `key`:`value` mapping where the `key` is IMPLICIT. That is to
    say, it is acceptable to omit the key. A single value passed as the `value`
    will set the implicit key's component.

    In all instances the implicit key is the `main package`. The `multimap`
    format can accept a list instead of a string as a value, and each item
    in that list also follows the implicit key policy.

    For each item in the list, if the `key` is EXPLICIT, by using `dict` style
    `key`:`value` mapping, then the key specified will be used.

    Within `ypkg(1)`, that key is always a package name. This name should be
    the shortform name, not the fully qualified name, i.e the subpackage name
    without the `name` prefix.

    This allows a general key to accept sane defaults, but also allows the key
    to be extended to override attributes of a subpackage.

`Keys`

* `name` [string]

    Set the name of the package. In general this should try to match the upstream
    source name wherever possible. All subpackages generated by `ypkg-build(1)` will
    have this `name` as a prefix.

* `version` [string]

    The version of the software being packaged. This should match the upstream
    version, i.e. that of the tarball or git tag.

* `release` [integer]

    Packages within Solus are updated by their **release number**. This number
    must start at 1 in new packages, and be incremented for every new update
    or change to the package that is published.

    It is perfectly acceptable to push an update with a **lower version** by
    bumping the release number.

* `license` [string(s)]

    One or more strings that identify the software license of this package.
    This should in most cases be a recognised `SPDX` license name.

        * https://spdx.org/licenses/

* `source` [dict(s)]

    This key expects a list of `key`:`value` mappings, to declare the sources that
    this package will use. A "simple source" could be a tarball, where the key
    is the upstream URL, and the value must be a valid `sha256sum(1)` for that
    tarball.

    You can list multiple sources and they will all be fetched for the build
    process, but only the first will be extracted. You can locate these other
    sources during your build with the `$sources` variable.

    `git(1)` sources are also supported, and can be identified by prefixing the
    URI with `git|`. The expected value should be a commit, sha reference, or a
    tag.

* `component` [multimap]

    This key sets the package component, that is to say, the logical unit of
    organisation that it belongs to. Check `eopkg lc` for existing component
    names.

    `component` is a multimap key, therefore if passed a single string value
    it will set the component for the main package. However, you may instead
    pass a list of the subpackage names, and set their component individually
    using the map **value**.

## EXAMPLE

    # Complete package

    name       : nano
    version    : 2.7.1
    release    : 63
    source     :
        - https://www.nano-editor.org/dist/v2.7/nano-2.7.1.tar.xz : df5cbe69831d7394c0a32fb27373ab313335ea4dc586d6f4be4081eb1de857cd
    license    :
        - GPL-3.0
    summary    : Small, friendly text editor inspired by Pico
    component  : editor
    description: |
        GNU nano is an easy-to-use text editor originally designed as a
        replacement for Pico, the ncurses-based editor from the non-free
        mailer package Pine (itself now available under the Apache License
        as Alpine).
    setup      : |
        %configure --enable-utf8 --docdir=/usr/share/doc/nano
    build      : |
        %make
    install    : |
        %make_install

    # Git sources
    source     :
        - git|https://github.com/solus-project/ypkg.git : v17.0

    # Multimap, deciphered
    # Set the component for the main package to `system.base`
    component: system.base

    # Also setting the main component to `system.base`
    component:
        - system.base

    # Set the component of the main package to system.base, but set the
    # component for subpackage `devel` to `programming.devel`
    component:
        - system.base
        - devel: programming.devel

## COPYRIGHT

 * Copyright Â© 2016 Ikey Doherty, License: CC-BY-SA-3.0


## SEE ALSO

`solbuild(1)`, `ypkg(1)` `ypkg-build(1)`, `ypkg-install-deps(1)`

 * https://wiki.solus-project.com/Package.yml
 * https://github.com/solus-project/ypkg
 * https://wiki.solus-project.com/Packaging
 * https://spdx.org/licenses/

## NOTES

Creative Commons Attribution-ShareAlike 3.0 Unported

 * http://creativecommons.org/licenses/by-sa/3.0/
